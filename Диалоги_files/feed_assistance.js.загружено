var FeedAssistance={show:function(e,i){isVisible(e)||slideDown(e,150,i)},hide:function(e,i){isVisible(e)&&slideUp(e,150,i)},hideBlock:function(e,i,t){i&&t&&ajax.post("al_feed.php?act=a_hide_assistance",{type:i,hash:t}),e=domClosest("_block",e),FeedAssistance.hide(e)},tipShow:function(e,i,t,s){e=ge(e),t||(t=[-10,-15]);var o=function(){showTooltip(e,{text:getLang(i),dir:"left",slideX:15,className:"feed_asc_tt"+(s?" "+s:""),shift:t,onCreate:removeEvent.pbind(e,"mouseout")})};vk.loaded?setTimeout(o,0):addEvent(window,"load",o)},tipHide:function(e){e=ge(e),e&&e.tt&&e.tt.hide&&e.tt.hide()},ownerPhoto:function(e){cur.shareSetOwnPhoto=function(i){if(curBox()&&curBox().hide(),i){var t=geByTag1("img",ge(top_profile_link));t&&(t.src=i)}FeedAssistance.hideBlock(e)},Page.ownerPhoto()},initEduBlock:function(e,i){cur.skipHints=i.country||i.city,cur.cityUpdated=i.city,selectsData.setCountries(i.countries_list);for(var t in i.countries)selectsData.setCountryInfo(t,i.countries[t]);for(var t in i.cities)selectsData.setCityInfo(t,i.cities[t]);"school"===e?(i.school||disableButton("feeas_asc_edu_save",!0),cur.uiClass=new ClassSelect(ge("school_class"),ge("school_class_row"),{show:FeedAssistance.show,hide:FeedAssistance.hide,country:i.country,school:i.school,school_class:i.school_class,zeroPlaceholder:!0,dark:1}),cur.uiSchool=new SchoolHintSelect(ge("school_school"),ge("school_school_row"),{show:function(e){FeedAssistance.show(e),cur.cityUpdated&&(cur.cityUpdated=!1,setTimeout(FeedAssistance.focusEdu.pbind("school"),500))},hide:function(e){FeedAssistance.hide(e),FeedAssistance.tipHide("school_school_tip")},progressBar:"school_progress",city:i.city,school:i.school,classSelect:cur.uiClass,onChange:function(e){intval(e)?(FeedAssistance.show("school_details"),FeedAssistance.tipHide("school_school_tip"),FeedAssistance.eduYearTip("school")):(FeedAssistance.hide("school_details"),FeedAssistance.tipHide("school_graduation_tip"),setTimeout(FeedAssistance.focusEdu.pbind("school"),500)),disableButton("feeas_asc_edu_save",!intval(e)),cur.uiClass.clear(),cur.uiGraduation.clear(),cur.skipHints=!1},dark:1})):(i.university||disableButton("feeas_asc_edu_save",!0),cur.uiChair=new ChairSelect(ge("uni_chair"),ge("uni_chair_row"),{show:FeedAssistance.show,hide:FeedAssistance.hide,progressBar:"uni_progress",faculty:i.faculty,chair:i.chair,onChange:function(e){intval(e)?hide("u_add_chair_to_db"):i.showAddChair&&show("u_add_chair_to_db")},zeroPlaceholder:!0,dark:1}),cur.uiFaculty=new FacultySelect(ge("uni_faculty"),ge("uni_faculty_row"),{show:FeedAssistance.show,hide:FeedAssistance.hide,progressBar:"uni_progress",university:i.university,faculty:i.faculty,chairSelect:cur.uiChair,onChange:function(e){intval(e)?hide("u_add_fac_to_db"):i.showAddFaculty&&show("u_add_fac_to_db")},dark:1}),cur.uiUniversity=new UniversitySelect(ge("uni_university"),ge("uni_university_row"),{show:function(e){FeedAssistance.show(e),cur.cityUpdated&&(cur.cityUpdated=!1,setTimeout(FeedAssistance.focusEdu.pbind("uni"),500))},hide:function(e){FeedAssistance.hide(e),FeedAssistance.tipHide("uni_university_tip")},progressBar:"uni_progress",city:i.city,university:i.university,eduFormSelect:cur.uiEducationForm,eduStatusSelect:cur.uiEducationStatus,facultySelect:cur.uiFaculty,onChange:function(e){intval(e)?(FeedAssistance.show("uni_details"),FeedAssistance.tipHide("uni_university_tip"),FeedAssistance.eduYearTip("uni")):(FeedAssistance.hide("uni_details"),FeedAssistance.tipHide("uni_graduation_tip"),setTimeout(FeedAssistance.focusEdu.pbind("uni"),500)),disableButton("feeas_asc_edu_save",!intval(e)),cur.uiGraduation.clear(),cur.skipHints=!1},dark:1})),cur.uiGraduation=new Dropdown(ge(e+"_graduation"),i.graduations,{autocomplete:!0,placeholder:getLang("select_graduation_not_selected"),noResult:getLang("select_year_not_found"),selectedItems:i.graduation,onChange:function(i){intval(i)?FeedAssistance.tipHide(e+"_graduation_tip"):cur.uiGraduation.clear()},dark:1}),cur.uiCity=new CitySelect(ge(e+"_city"),ge(e+"_city_row"),{show:function(i){setTimeout(function(){intval(cur.uiCity.val())||cur.skipHints||FeedAssistance.tipShow(e+"_city_tip","intro_"+e+"_city_tip")},0),FeedAssistance.show(i)},hide:function(i){FeedAssistance.tipHide(e+"_city_tip"),FeedAssistance.hide(i)},progressBar:e+"_progress",country:i.country,city:i.city_val,schoolSelect:"school"===e?cur.uiSchool:!1,universitySelect:"uni"===e?cur.uiUniversity:!1,maxItemsShown:function(e){return e>6?500:350},onChange:function(i){intval(i)?FeedAssistance.tipHide(e+"_city_tip"):intval(cur.uiCountry.val())&&FeedAssistance.tipShow(e+"_city_tip","intro_"+e+"_city_tip"),cur.cityUpdated=!0,cur.skipHints=!1},dark:1}),cur.uiCountry=new CountrySelect(ge(e+"_country"),ge(e+"_country_row"),{show:FeedAssistance.show,hide:FeedAssistance.hide,progressBar:e+"_progress",country:i.country_val,eduFormSelect:"uni"===e?cur.uiEducationForm:!1,eduStatusSelect:"uni"===e?cur.uiEducationStatus:!1,classSelect:"school"===e?cur.uiClass:!1,citySelect:cur.uiCity,noDefaultCountry:1,dark:1})},focusEdu:function(e){var i="school"===e?cur.uiSchool:cur.uiUniversity;!intval(cur.uiCity.val())||intval(i.val())||cur.skipHints||(i.focusSelf=!0,i.focus(),i.select.hide(),"school"==e?FeedAssistance.tipShow("school_school_tip","intro_school_tip"):FeedAssistance.tipShow("uni_university_tip","intro_uni_tip"))},eduYearTip:function(e){intval(cur.uiGraduation.val())?FeedAssistance.tipHide(e+"_graduation_tip"):FeedAssistance.tipShow(e+"_graduation_tip","intro_"+e+"_year_tip",!1,"feed_asc_year_tt")},saveSchool:function(e,i){var t={act:"a_save_education_school",from:"feed_assistance",school0id:1,school0country:cur.uiCountry.val(),school0city:cur.uiCity.val(),school0school:cur.uiSchool.val(),school0graduation:cur.uiGraduation.val(),school0class:cur.uiClass.val(),hash:i};ajax.post("al_profileEdit.php",t,{onDone:function(i,t,s){return s?(ge("feed_asc_edu_cont").innerHTML=i,cur.eduUsersParams=t,void(cur.eduUsersParams.offset=s)):void FeedAssistance.hideBlock(e)},showProgress:lockButton.pbind(e),hideProgress:unlockButton.pbind(e)})},saveUni:function(e,i){var t={act:"a_save_education_uni",from:"feed_assistance",primary_unicountry:cur.uiCountry.val(),primary_unicity:cur.uiCity.val(),primary_uniuniversity:cur.uiUniversity.val(),primary_unigraduation:cur.uiGraduation.val(),primary_unifaculty:cur.uiFaculty.val(),primary_unichair:cur.uiChair.val(),hash:i};ajax.post("al_profileEdit.php",t,{onDone:function(i,t,s){return s?(ge("feed_asc_edu_cont").innerHTML=i,cur.eduUsersParams=t,void(cur.eduUsersParams.offset=s)):void FeedAssistance.hideBlock(e)},showProgress:lockButton.pbind(e),hideProgress:unlockButton.pbind(e)})},moreEduUsers:function(e,i){var t=geByClass1("_preload","feed_asc_edu_cont");show(t),removeClass(t,"_preload");var s={act:"a_more_edu_users",type:e};s=extend(s,cur.eduUsersParams),ajax.post("al_feed.php",s,{onDone:function(e,t){return t?(ge("feed_asc_eu_rows").appendChild(ce("div",{className:"_preload unshown",innerHTML:e})),void(cur.eduUsersParams.offset+=t)):void re(i)},showProgress:lockButton.pbind(i),hideProgress:unlockButton.pbind(i)})},initUsersBlock:function(){var e=ge("ui_pop_users_load_more");e&&(cur.userAutoScroll=new AutoList("feed_asc_users",{onNoMore:re.pbind(e),onNeedRows:function(e,i){ajax.post("al_feed.php",{act:"a_more_pop_users",offset:i},{onDone:e})},showProgress:lockButton.pbind(e),hideProgress:unlockButton.pbind(e),rowClass:"feed_asc_user_row"}),cur.feedDestroy||(cur.feedDestroy=[]),cur.feedDestroy.push(function(){cur.userAutoScroll.destroy()}))},userSubscribe:function(e,i,t){if(!buttonLocked(e)){var s=hasClass(e,"secondary"),o={showProgress:lockButton.pbind(e),hideProgress:unlockButton.pbind(e),onDone:function(){toggleClass(e,"secondary")}};ajax.post("al_friends.php",{act:s?"remove":"add",mid:i,hash:t,from:"feed_assistance"},o)}},initCityBlock:function(e){selectsData.setCountries(e.countries),selectsData.setCities(e.country,e.cities),cur.uiCity=new CitySelect(ge("city_city"),ge("city_city_row"),{progressBar:ge("city_progress"),placeholder:getLang("intro_feed_choose_city"),city:e.city_val,country:e.country,maxItemsShown:function(e){return e>6?500:350},big:!0,zeroPlaceholder:!0}),cur.uiCountry=new CountrySelect(ge("city_country"),ge("city_country_row"),{progressBar:ge("city_progress"),placeholder:getLang("intro_feed_choose_country"),country:e.country_val,citySelect:cur.uiCity,noDefaultCountry:1,big:!0})},saveCity:function(e,i){val("feed_asc_city_result","");var t={act:"a_fill_citybox",country:cur.uiCountry.val(),city:cur.uiCity.val(),hash:i};return intval(t.country)?intval(t.city)?void ajax.post("al_profileEdit.php",t,{onDone:function(i){FeedAssistance.hideBlock(e),showDoneBox(i)},onFail:function(e){return showMsg("feed_asc_city_result",e,"error",!0),!0},showProgress:lockButton.pbind(e),hideProgress:unlockButton.pbind(e)}):(notaBene(geByClass1("selector",cur.uiCity.container),!1,!0),void notaBene(geByClass1("selector_input",cur.uiCity.container),!1,!0)):(notaBene(geByClass1("selector",cur.uiCountry.container),!1,!0),void notaBene(geByClass1("selector_input",cur.uiCountry.container),!1,!0))},anotherCity:function(){hide("feed_asc_avg_city"),show("feed_asc_select_city")}},FeedNotifications={hide:function(e,i,t){var s=domClosest("_block",e);s&&slideUp(s,200),ajax.post("/al_index.php",{act:"hide_internal_notification",reason:"decline",id:i,hash:t})},click:function(e,i,t,s,o){if(49==i)return showBox("landings.php",{act:"donors_day_edit_box",from_snippet:1});if(inArray(i,[36,37,38,39,40,43,44]))return showBox("al_gifts.php",{act:"get_gift_box",hide_notification:i},{stat:["gifts.css","wide_dd.js","wide_dd.css"],dark:1});if(ajax.post("/al_index.php",{act:"hide_internal_notification",reason:"accept",id:i,hash:s}),!t){var n=domClosest("_block",e);return n&&slideUp(n,200),!1}if(lockButton(e),0==t.indexOf("?")){var c=nav.fromStr(t);return delete c[0],unlockButton(e),nav.change(c)}return nav.go(t,o,{noback:!0})}};try{stManager.done("feed_assistance.js")}catch(e){}